\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}!/usr/bin/env ruby}

\PY{n}{inbits} \PY{o}{=} \PY{l+m+mi}{12}
\PY{n}{outbits} \PY{o}{=} \PY{l+m+mi}{16}

\PY{n+nb}{puts} \PY{o}{<<}\PY{n+no}{eos}
\PY{l+s+sh}{\PYZsh{}ifndef \PYZus{}\PYZus{}GENERATED\PYZus{}PWM\PYZus{}LUT\PYZus{}LOG\PYZus{}\PYZsh{}\PYZob{}inbits\PYZcb{}\PYZus{}\PYZsh{}\PYZob{}outbits\PYZcb{}\PYZus{}\PYZus{}}
\PY{l+s+sh}{\PYZsh{}define \PYZus{}\PYZus{}GENERATED\PYZus{}PWM\PYZus{}LUT\PYZus{}LOG\PYZus{}\PYZsh{}\PYZob{}inbits\PYZcb{}\PYZus{}\PYZsh{}\PYZob{}outbits\PYZcb{}\PYZus{}\PYZus{}}

\PY{l+s+sh}{\PYZsh{}include <avr/pgmspace.h>}

\PY{l+s+sh}{const uint16\PYZus{}t log\PYZus{}pwm\PYZus{}lut[] PROGMEM = \PYZob{}}
\PY{l+s+sh}{\PYZsh{}\PYZob{}(0...2**inbits).map \PYZob{}|i| (2.0**(i/(2**inbits.to\PYZus{}f)*outbits)).round \PYZcb{}.join(", ")\PYZcb{}}
\PY{l+s+sh}{\PYZcb{};}

\PY{l+s+sh}{\PYZsh{}endif//\PYZus{}\PYZus{}GENERATED\PYZus{}PWM\PYZus{}LUT\PYZus{}LOG\PYZus{}\PYZsh{}\PYZob{}inbits\PYZcb{}\PYZus{}\PYZsh{}\PYZob{}outbits\PYZcb{}\PYZus{}\PYZus{}}
\PY{n+no}{eos}
\end{Verbatim}
